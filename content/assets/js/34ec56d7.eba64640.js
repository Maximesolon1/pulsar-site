"use strict";(self.webpackChunkwebsite_next=self.webpackChunkwebsite_next||[]).push([[7728],{15680:(e,a,n)=>{n.d(a,{xA:()=>c,yg:()=>d});var t=n(96540);function s(e,a,n){return a in e?Object.defineProperty(e,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[a]=n,e}function r(e,a){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);a&&(t=t.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),n.push.apply(n,t)}return n}function l(e){for(var a=1;a<arguments.length;a++){var n=null!=arguments[a]?arguments[a]:{};a%2?r(Object(n),!0).forEach((function(a){s(e,a,n[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))}))}return e}function o(e,a){if(null==e)return{};var n,t,s=function(e,a){if(null==e)return{};var n,t,s={},r=Object.keys(e);for(t=0;t<r.length;t++)n=r[t],a.indexOf(n)>=0||(s[n]=e[n]);return s}(e,a);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(t=0;t<r.length;t++)n=r[t],a.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}var i=t.createContext({}),p=function(e){var a=t.useContext(i),n=a;return e&&(n="function"==typeof e?e(a):l(l({},a),e)),n},c=function(e){var a=p(e.components);return t.createElement(i.Provider,{value:a},e.children)},g="mdxType",m={inlineCode:"code",wrapper:function(e){var a=e.children;return t.createElement(t.Fragment,{},a)}},u=t.forwardRef((function(e,a){var n=e.components,s=e.mdxType,r=e.originalType,i=e.parentName,c=o(e,["components","mdxType","originalType","parentName"]),g=p(n),u=s,d=g["".concat(i,".").concat(u)]||g[u]||m[u]||r;return n?t.createElement(d,l(l({ref:a},c),{},{components:n})):t.createElement(d,l({ref:a},c))}));function d(e,a){var n=arguments,s=a&&a.mdxType;if("string"==typeof e||s){var r=n.length,l=new Array(r);l[0]=u;var o={};for(var i in a)hasOwnProperty.call(a,i)&&(o[i]=a[i]);o.originalType=e,o[g]="string"==typeof e?e:s,l[1]=o;for(var p=2;p<r;p++)l[p]=n[p];return t.createElement.apply(null,l)}return t.createElement.apply(null,n)}u.displayName="MDXCreateElement"},27910:(e,a,n)=>{n.r(a),n.d(a,{assets:()=>i,contentTitle:()=>l,default:()=>m,frontMatter:()=>r,metadata:()=>o,toc:()=>p});var t=n(58168),s=(n(96540),n(15680));const r={id:"io-quickstart",title:"How to connect Pulsar to database",sidebar_label:"Get started",original_id:"io-quickstart"},l=void 0,o={unversionedId:"io-quickstart",id:"version-2.6.2/io-quickstart",title:"How to connect Pulsar to database",description:"This tutorial provides a hands-on look at how you can move data out of Pulsar without writing a single line of code.",source:"@site/versioned_docs/version-2.6.2/io-quickstart.md",sourceDirName:".",slug:"/io-quickstart",permalink:"/docs/2.6.2/io-quickstart",draft:!1,editUrl:"https://github.com/apache/pulsar-site/edit/main/versioned_docs/version-2.6.2/io-quickstart.md",tags:[],version:"2.6.2",frontMatter:{id:"io-quickstart",title:"How to connect Pulsar to database",sidebar_label:"Get started",original_id:"io-quickstart"},sidebar:"version-2.6.2/docsSidebar",previous:{title:"Overview",permalink:"/docs/2.6.2/io-overview"},next:{title:"Use",permalink:"/docs/2.6.2/io-use"}},i={},p=[{value:"Install Pulsar and built-in connector",id:"install-pulsar-and-built-in-connector",level:2},{value:"Start Pulsar standalone",id:"start-pulsar-standalone",level:2},{value:"Connect Pulsar to Cassandra",id:"connect-pulsar-to-cassandra",level:2},{value:"Setup a Cassandra cluster",id:"setup-a-cassandra-cluster",level:3},{value:"Configure a Cassandra sink",id:"configure-a-cassandra-sink",level:3},{value:"Create a Cassandra sink",id:"create-a-cassandra-sink",level:3},{value:"Inspect a Cassandra sink",id:"inspect-a-cassandra-sink",level:3},{value:"Verify a Cassandra sink",id:"verify-a-cassandra-sink",level:3},{value:"Delete a Cassandra Sink",id:"delete-a-cassandra-sink",level:3},{value:"Connect Pulsar to PostgreSQL",id:"connect-pulsar-to-postgresql",level:2},{value:"Setup a PostgreSQL cluster",id:"setup-a-postgresql-cluster",level:3},{value:"Configure a JDBC sink",id:"configure-a-jdbc-sink",level:3},{value:"Create a JDBC sink",id:"create-a-jdbc-sink",level:3},{value:"Tip",id:"tip-1",level:4},{value:"Inspect a JDBC sink",id:"inspect-a-jdbc-sink",level:3},{value:"Stop a JDBC sink",id:"stop-a-jdbc-sink",level:3},{value:"Restart a JDBC sink",id:"restart-a-jdbc-sink",level:3},{value:"Update a JDBC sink",id:"update-a-jdbc-sink",level:3},{value:"Delete a JDBC sink",id:"delete-a-jdbc-sink",level:3}],c={toc:p},g="wrapper";function m(e){let{components:a,...n}=e;return(0,s.yg)(g,(0,t.A)({},c,n,{components:a,mdxType:"MDXLayout"}),(0,s.yg)("p",null,"This tutorial provides a hands-on look at how you can move data out of Pulsar without writing a single line of code."),(0,s.yg)("p",null,"It is helpful to review the ",(0,s.yg)("a",{parentName:"p",href:"/docs/2.6.2/io-overview"},"concepts")," for Pulsar I/O with running the steps in this guide to gain a deeper understanding."),(0,s.yg)("p",null,"At the end of this tutorial, you are able to:"),(0,s.yg)("ul",null,(0,s.yg)("li",{parentName:"ul"},(0,s.yg)("p",{parentName:"li"},(0,s.yg)("a",{parentName:"p",href:"#Connect-Pulsar-to-Cassandra"},"Connect Pulsar to Cassandra"))),(0,s.yg)("li",{parentName:"ul"},(0,s.yg)("p",{parentName:"li"},(0,s.yg)("a",{parentName:"p",href:"#Connect-Pulsar-to-PostgreSQL"},"Connect Pulsar to PostgreSQL")))),(0,s.yg)("admonition",{type:"tip"},(0,s.yg)("ul",{parentName:"admonition"},(0,s.yg)("li",{parentName:"ul"},"These instructions assume you are running Pulsar in ",(0,s.yg)("a",{parentName:"li",href:"/docs/2.6.2/getting-started-standalone"},"standalone mode"),". However, all\nthe commands used in this tutorial can be used in a multi-nodes Pulsar cluster without any changes."),(0,s.yg)("li",{parentName:"ul"},"All the instructions are assumed to run at the root directory of a Pulsar binary distribution."))),(0,s.yg)("h2",{id:"install-pulsar-and-built-in-connector"},"Install Pulsar and built-in connector"),(0,s.yg)("p",null,"Before connecting Pulsar to a database, you need to install Pulsar and the desired built-in connector."),(0,s.yg)("p",null,"For more information about ",(0,s.yg)("strong",{parentName:"p"},"how to install a standalone Pulsar and built-in connectors"),", see ",(0,s.yg)("a",{parentName:"p",href:"/docs/2.6.2/getting-started-standalone/#installing-pulsar"},"here"),"."),(0,s.yg)("h2",{id:"start-pulsar-standalone"},"Start Pulsar standalone"),(0,s.yg)("ol",null,(0,s.yg)("li",{parentName:"ol"},(0,s.yg)("p",{parentName:"li"},"Start Pulsar locally."),(0,s.yg)("pre",{parentName:"li"},(0,s.yg)("code",{parentName:"pre",className:"language-bash"},"\nbin/pulsar standalone\n\n")),(0,s.yg)("p",{parentName:"li"},"All the components of a Pulsar service are start in order."),(0,s.yg)("p",{parentName:"li"},"You can curl those pulsar service endpoints to make sure Pulsar service is up running correctly.")),(0,s.yg)("li",{parentName:"ol"},(0,s.yg)("p",{parentName:"li"},"Check Pulsar binary protocol port."),(0,s.yg)("pre",{parentName:"li"},(0,s.yg)("code",{parentName:"pre",className:"language-bash"},"\ntelnet localhost 6650\n\n"))),(0,s.yg)("li",{parentName:"ol"},(0,s.yg)("p",{parentName:"li"},"Check Pulsar Function cluster."),(0,s.yg)("pre",{parentName:"li"},(0,s.yg)("code",{parentName:"pre",className:"language-bash"},"\ncurl -s http://localhost:8080/admin/v2/worker/cluster\n\n")),(0,s.yg)("p",{parentName:"li"},(0,s.yg)("strong",{parentName:"p"},"Example output")),(0,s.yg)("pre",{parentName:"li"},(0,s.yg)("code",{parentName:"pre",className:"language-json"},'\n[{"workerId":"c-standalone-fw-localhost-6750","workerHostname":"localhost","port":6750}]\n\n'))),(0,s.yg)("li",{parentName:"ol"},(0,s.yg)("p",{parentName:"li"},"Make sure a public tenant and a default namespace exist."),(0,s.yg)("pre",{parentName:"li"},(0,s.yg)("code",{parentName:"pre",className:"language-bash"},"\ncurl -s http://localhost:8080/admin/v2/namespaces/public\n\n")),(0,s.yg)("p",{parentName:"li"},(0,s.yg)("strong",{parentName:"p"},"Example output")),(0,s.yg)("pre",{parentName:"li"},(0,s.yg)("code",{parentName:"pre",className:"language-json"},'\n["public/default","public/functions"]\n\n'))),(0,s.yg)("li",{parentName:"ol"},(0,s.yg)("p",{parentName:"li"},"All built-in connectors should be listed as available."),(0,s.yg)("pre",{parentName:"li"},(0,s.yg)("code",{parentName:"pre",className:"language-bash"},"\ncurl -s http://localhost:8080/admin/v2/functions/connectors\n\n")),(0,s.yg)("p",{parentName:"li"},(0,s.yg)("strong",{parentName:"p"},"Example output")),(0,s.yg)("pre",{parentName:"li"},(0,s.yg)("code",{parentName:"pre",className:"language-json"},'\n[{"name":"aerospike","description":"Aerospike database sink","sinkClass":"org.apache.pulsar.io.aerospike.AerospikeStringSink"},{"name":"cassandra","description":"Writes data into Cassandra","sinkClass":"org.apache.pulsar.io.cassandra.CassandraStringSink"},{"name":"kafka","description":"Kafka source and sink connector","sourceClass":"org.apache.pulsar.io.kafka.KafkaStringSource","sinkClass":"org.apache.pulsar.io.kafka.KafkaBytesSink"},{"name":"kinesis","description":"Kinesis sink connector","sinkClass":"org.apache.pulsar.io.kinesis.KinesisSink"},{"name":"rabbitmq","description":"RabbitMQ source connector","sourceClass":"org.apache.pulsar.io.rabbitmq.RabbitMQSource"},{"name":"twitter","description":"Ingest data from Twitter firehose","sourceClass":"org.apache.pulsar.io.twitter.TwitterFireHose"}]\n\n')),(0,s.yg)("p",{parentName:"li"},"If an error occurs when starting Pulsar service, you may see an exception at the terminal running ",(0,s.yg)("inlineCode",{parentName:"p"},"pulsar/standalone"),",\nor you can navigate to the ",(0,s.yg)("inlineCode",{parentName:"p"},"logs")," directory under the Pulsar directory to view the logs."))),(0,s.yg)("h2",{id:"connect-pulsar-to-cassandra"},"Connect Pulsar to Cassandra"),(0,s.yg)("p",null,"This section demonstrates how to connect Pulsar to Cassandra."),(0,s.yg)("admonition",{type:"tip"},(0,s.yg)("ul",{parentName:"admonition"},(0,s.yg)("li",{parentName:"ul"},"Make sure you have Docker installed. If you do not have one, see ",(0,s.yg)("a",{parentName:"li",href:"https://docs.docker.com/docker-for-mac/install/"},"install Docker"),"."),(0,s.yg)("li",{parentName:"ul"},"The Cassandra sink connector reads messages from Pulsar topics and writes the messages into Cassandra tables. For more information, see ",(0,s.yg)("a",{parentName:"li",href:"/docs/2.6.2/io-cassandra-sink"},"Cassandra sink connector"),"."))),(0,s.yg)("h3",{id:"setup-a-cassandra-cluster"},"Setup a Cassandra cluster"),(0,s.yg)("p",null,"This example uses ",(0,s.yg)("inlineCode",{parentName:"p"},"cassandra")," Docker image to start a single-node Cassandra cluster in Docker."),(0,s.yg)("ol",null,(0,s.yg)("li",{parentName:"ol"},(0,s.yg)("p",{parentName:"li"},"Start a Cassandra cluster."),(0,s.yg)("pre",{parentName:"li"},(0,s.yg)("code",{parentName:"pre",className:"language-bash"},"\ndocker run -d --rm --name=cassandra -p 9042:9042 cassandra:3.11\n\n")),(0,s.yg)("admonition",{parentName:"li",type:"note"},(0,s.yg)("p",{parentName:"admonition"},"Before moving to the next steps, make sure the Cassandra cluster is running."))),(0,s.yg)("li",{parentName:"ol"},(0,s.yg)("p",{parentName:"li"},"Make sure the Docker process is running."),(0,s.yg)("pre",{parentName:"li"},(0,s.yg)("code",{parentName:"pre",className:"language-bash"},"\ndocker ps\n\n"))),(0,s.yg)("li",{parentName:"ol"},(0,s.yg)("p",{parentName:"li"},"Check the Cassandra logs to make sure the Cassandra process is running as expected."),(0,s.yg)("pre",{parentName:"li"},(0,s.yg)("code",{parentName:"pre",className:"language-bash"},"\ndocker logs cassandra\n\n"))),(0,s.yg)("li",{parentName:"ol"},(0,s.yg)("p",{parentName:"li"},"Check the status of the Cassandra cluster."),(0,s.yg)("pre",{parentName:"li"},(0,s.yg)("code",{parentName:"pre",className:"language-bash"},"\ndocker exec cassandra nodetool status\n\n")),(0,s.yg)("p",{parentName:"li"},(0,s.yg)("strong",{parentName:"p"},"Example output")),(0,s.yg)("pre",{parentName:"li"},(0,s.yg)("code",{parentName:"pre"},"\nDatacenter: datacenter1\n=======================\nStatus=Up/Down\n|/ State=Normal/Leaving/Joining/Moving\n--  Address     Load       Tokens       Owns (effective)  Host ID                               Rack\nUN  172.17.0.2  103.67 KiB  256          100.0%            af0e4b2f-84e0-4f0b-bb14-bd5f9070ff26  rack1\n\n"))),(0,s.yg)("li",{parentName:"ol"},(0,s.yg)("p",{parentName:"li"},"Use ",(0,s.yg)("inlineCode",{parentName:"p"},"cqlsh")," to connect to the Cassandra cluster."),(0,s.yg)("pre",{parentName:"li"},(0,s.yg)("code",{parentName:"pre",className:"language-bash"},"\n$ docker exec -ti cassandra cqlsh localhost\nConnected to Test Cluster at localhost:9042.\n[cqlsh 5.0.1 | Cassandra 3.11.2 | CQL spec 3.4.4 | Native protocol v4]\nUse HELP for help.\ncqlsh>\n\n"))),(0,s.yg)("li",{parentName:"ol"},(0,s.yg)("p",{parentName:"li"},"Create a keyspace ",(0,s.yg)("inlineCode",{parentName:"p"},"pulsar_test_keyspace"),"."),(0,s.yg)("pre",{parentName:"li"},(0,s.yg)("code",{parentName:"pre",className:"language-bash"},"\ncqlsh> CREATE KEYSPACE pulsar_test_keyspace WITH replication = {'class':'SimpleStrategy', 'replication_factor':1};\n\n"))),(0,s.yg)("li",{parentName:"ol"},(0,s.yg)("p",{parentName:"li"},"Create a table ",(0,s.yg)("inlineCode",{parentName:"p"},"pulsar_test_table"),"."),(0,s.yg)("pre",{parentName:"li"},(0,s.yg)("code",{parentName:"pre",className:"language-bash"},"\ncqlsh> USE pulsar_test_keyspace;\ncqlsh:pulsar_test_keyspace> CREATE TABLE pulsar_test_table (key text PRIMARY KEY, col text);\n\n")))),(0,s.yg)("h3",{id:"configure-a-cassandra-sink"},"Configure a Cassandra sink"),(0,s.yg)("p",null,"Now that we have a Cassandra cluster running locally."),(0,s.yg)("p",null,"In this section, you need to configure a Cassandra sink connector."),(0,s.yg)("p",null,"To run a Cassandra sink connector, you need to prepare a configuration file including the information that Pulsar connector runtime needs to know."),(0,s.yg)("p",null,"For example, how Pulsar connector can find the Cassandra cluster, what is the keyspace and the table that Pulsar connector uses for writing Pulsar messages to, and so on."),(0,s.yg)("p",null,"You can create a configuration file through one of the following methods."),(0,s.yg)("ul",null,(0,s.yg)("li",{parentName:"ul"},(0,s.yg)("p",{parentName:"li"},"JSON"),(0,s.yg)("pre",{parentName:"li"},(0,s.yg)("code",{parentName:"pre",className:"language-json"},'\n{\n    "roots": "localhost:9042",\n    "keyspace": "pulsar_test_keyspace",\n    "columnFamily": "pulsar_test_table",\n    "keyname": "key",\n    "columnName": "col"\n}\n\n'))),(0,s.yg)("li",{parentName:"ul"},(0,s.yg)("p",{parentName:"li"},"YAML"),(0,s.yg)("pre",{parentName:"li"},(0,s.yg)("code",{parentName:"pre",className:"language-yaml"},'\nconfigs:\n    roots: "localhost:9042"\n    keyspace: "pulsar_test_keyspace"\n    columnFamily: "pulsar_test_table"\n    keyname: "key"\n    columnName: "col"\n\n')))),(0,s.yg)("p",null,"For more information, see ",(0,s.yg)("a",{parentName:"p",href:"/docs/2.6.2/io-cassandra-sink"},"Cassandra sink connector"),"."),(0,s.yg)("h3",{id:"create-a-cassandra-sink"},"Create a Cassandra sink"),(0,s.yg)("p",null,"You can use the ",(0,s.yg)("a",{parentName:"p",href:"/docs/2.6.2/io-cli"},"Connector Admin CLI"),"\nto create a sink connector and perform other operations on them."),(0,s.yg)("p",null,"Run the following command to create a Cassandra sink connector with sink type ",(0,s.yg)("em",{parentName:"p"},"cassandra")," and the config file ",(0,s.yg)("em",{parentName:"p"},"examples/cassandra-sink.yml")," created previously."),(0,s.yg)("pre",null,(0,s.yg)("code",{parentName:"pre",className:"language-bash"},"\nbin/pulsar-admin sinks create \\\n    --tenant public \\\n    --namespace default \\\n    --name cassandra-test-sink \\\n    --sink-type cassandra \\\n    --sink-config-file examples/cassandra-sink.yml \\\n    --inputs test_cassandra\n\n")),(0,s.yg)("p",null,"Once the command is executed, Pulsar creates the sink connector ",(0,s.yg)("em",{parentName:"p"},"cassandra-test-sink"),"."),(0,s.yg)("p",null,"This sink connector runs\nas a Pulsar Function and writes the messages produced in the topic ",(0,s.yg)("em",{parentName:"p"},"test_cassandra")," to the Cassandra table ",(0,s.yg)("em",{parentName:"p"},"pulsar_test_table"),"."),(0,s.yg)("h3",{id:"inspect-a-cassandra-sink"},"Inspect a Cassandra sink"),(0,s.yg)("p",null,"You can use the ",(0,s.yg)("a",{parentName:"p",href:"/docs/2.6.2/io-cli"},"Connector Admin CLI"),"\nto monitor a connector and perform other operations on it."),(0,s.yg)("ul",null,(0,s.yg)("li",{parentName:"ul"},(0,s.yg)("p",{parentName:"li"},"Get the information of a Cassandra sink."),(0,s.yg)("pre",{parentName:"li"},(0,s.yg)("code",{parentName:"pre",className:"language-bash"},"\nbin/pulsar-admin sinks get \\\n  --tenant public \\\n  --namespace default \\\n  --name cassandra-test-sink\n\n")),(0,s.yg)("p",{parentName:"li"},(0,s.yg)("strong",{parentName:"p"},"Example output")),(0,s.yg)("pre",{parentName:"li"},(0,s.yg)("code",{parentName:"pre",className:"language-json"},'\n{\n"tenant": "public",\n"namespace": "default",\n"name": "cassandra-test-sink",\n"className": "org.apache.pulsar.io.cassandra.CassandraStringSink",\n"inputSpecs": {\n  "test_cassandra": {\n    "isRegexPattern": false\n  }\n},\n"configs": {\n  "roots": "localhost:9042",\n  "keyspace": "pulsar_test_keyspace",\n  "columnFamily": "pulsar_test_table",\n  "keyname": "key",\n  "columnName": "col"\n},\n"parallelism": 1,\n"processingGuarantees": "ATLEAST_ONCE",\n"retainOrdering": false,\n"autoAck": true,\n"archive": "builtin://cassandra"\n}\n\n'))),(0,s.yg)("li",{parentName:"ul"},(0,s.yg)("p",{parentName:"li"},"Check the status of a Cassandra sink."),(0,s.yg)("pre",{parentName:"li"},(0,s.yg)("code",{parentName:"pre",className:"language-bash"},"\nbin/pulsar-admin sinks status \\\n  --tenant public \\\n  --namespace default \\\n  --name cassandra-test-sink\n\n")),(0,s.yg)("p",{parentName:"li"},(0,s.yg)("strong",{parentName:"p"},"Example output")),(0,s.yg)("pre",{parentName:"li"},(0,s.yg)("code",{parentName:"pre",className:"language-json"},'\n{\n"numInstances" : 1,\n"numRunning" : 1,\n"instances" : [ {\n  "instanceId" : 0,\n  "status" : {\n    "running" : true,\n    "error" : "",\n    "numRestarts" : 0,\n    "numReadFromPulsar" : 0,\n    "numSystemExceptions" : 0,\n    "latestSystemExceptions" : [ ],\n    "numSinkExceptions" : 0,\n    "latestSinkExceptions" : [ ],\n    "numWrittenToSink" : 0,\n    "lastReceivedTime" : 0,\n    "workerId" : "c-standalone-fw-localhost-8080"\n  }\n} ]\n}\n\n')))),(0,s.yg)("h3",{id:"verify-a-cassandra-sink"},"Verify a Cassandra sink"),(0,s.yg)("ol",null,(0,s.yg)("li",{parentName:"ol"},(0,s.yg)("p",{parentName:"li"},"Produce some messages to the input topic of the Cassandra sink ",(0,s.yg)("em",{parentName:"p"},"test_cassandra"),"."),(0,s.yg)("pre",{parentName:"li"},(0,s.yg)("code",{parentName:"pre",className:"language-bash"},'\nfor i in {0..9}; do bin/pulsar-client produce -m "key-$i" -n 1 test_cassandra; done\n\n'))),(0,s.yg)("li",{parentName:"ol"},(0,s.yg)("p",{parentName:"li"},"Inspect the status of the Cassandra sink ",(0,s.yg)("em",{parentName:"p"},"test_cassandra"),"."),(0,s.yg)("pre",{parentName:"li"},(0,s.yg)("code",{parentName:"pre",className:"language-bash"},"\nbin/pulsar-admin sinks status \\\n    --tenant public \\\n    --namespace default \\\n    --name cassandra-test-sink\n\n")),(0,s.yg)("p",{parentName:"li"},"You can see 10 messages are processed by the Cassandra sink ",(0,s.yg)("em",{parentName:"p"},"test_cassandra"),"."),(0,s.yg)("p",{parentName:"li"},(0,s.yg)("strong",{parentName:"p"},"Example output")),(0,s.yg)("pre",{parentName:"li"},(0,s.yg)("code",{parentName:"pre",className:"language-json"},'\n{\n  "numInstances" : 1,\n  "numRunning" : 1,\n  "instances" : [ {\n    "instanceId" : 0,\n    "status" : {\n      "running" : true,\n      "error" : "",\n      "numRestarts" : 0,\n      "numReadFromPulsar" : 10,\n      "numSystemExceptions" : 0,\n      "latestSystemExceptions" : [ ],\n      "numSinkExceptions" : 0,\n      "latestSinkExceptions" : [ ],\n      "numWrittenToSink" : 10,\n      "lastReceivedTime" : 1551685489136,\n      "workerId" : "c-standalone-fw-localhost-8080"\n    }\n  } ]\n}\n\n'))),(0,s.yg)("li",{parentName:"ol"},(0,s.yg)("p",{parentName:"li"},"Use ",(0,s.yg)("inlineCode",{parentName:"p"},"cqlsh")," to connect to the Cassandra cluster."),(0,s.yg)("pre",{parentName:"li"},(0,s.yg)("code",{parentName:"pre",className:"language-bash"},"\ndocker exec -ti cassandra cqlsh localhost\n\n"))),(0,s.yg)("li",{parentName:"ol"},(0,s.yg)("p",{parentName:"li"},"Check the data of the Cassandra table ",(0,s.yg)("em",{parentName:"p"},"pulsar_test_table"),"."),(0,s.yg)("pre",{parentName:"li"},(0,s.yg)("code",{parentName:"pre",className:"language-bash"},"\ncqlsh> use pulsar_test_keyspace;\ncqlsh:pulsar_test_keyspace> select * from pulsar_test_table;\n\nkey    | col\n--------+--------\n key-5 |  key-5\n key-0 |  key-0\n key-9 |  key-9\n key-2 |  key-2\n key-1 |  key-1\n key-3 |  key-3\n key-6 |  key-6\n key-7 |  key-7\n key-4 |  key-4\n key-8 |  key-8\n\n")))),(0,s.yg)("h3",{id:"delete-a-cassandra-sink"},"Delete a Cassandra Sink"),(0,s.yg)("p",null,"You can use the ",(0,s.yg)("a",{parentName:"p",href:"/docs/2.6.2/io-cli"},"Connector Admin CLI"),"\nto delete a connector and perform other operations on it."),(0,s.yg)("pre",null,(0,s.yg)("code",{parentName:"pre",className:"language-bash"},"\nbin/pulsar-admin sinks delete \\\n    --tenant public \\\n    --namespace default \\\n    --name cassandra-test-sink\n\n")),(0,s.yg)("h2",{id:"connect-pulsar-to-postgresql"},"Connect Pulsar to PostgreSQL"),(0,s.yg)("p",null,"This section demonstrates how to connect Pulsar to PostgreSQL."),(0,s.yg)("admonition",{type:"tip"},(0,s.yg)("ul",{parentName:"admonition"},(0,s.yg)("li",{parentName:"ul"},"Make sure you have Docker installed. If you do not have one, see ",(0,s.yg)("a",{parentName:"li",href:"https://docs.docker.com/docker-for-mac/install/"},"install Docker"),"."),(0,s.yg)("li",{parentName:"ul"},"The JDBC sink connector pulls messages from Pulsar topics and persists the messages to ClickHouse, MariaDB, PostgreSQL, or SQlite."))),(0,s.yg)("blockquote",null,(0,s.yg)("p",{parentName:"blockquote"},"For more information, see ",(0,s.yg)("a",{parentName:"p",href:"/docs/2.6.2/io-jdbc-sink"},"JDBC sink connector"),".")),(0,s.yg)("h3",{id:"setup-a-postgresql-cluster"},"Setup a PostgreSQL cluster"),(0,s.yg)("p",null,"This example uses the PostgreSQL 12 docker image to start a single-node PostgreSQL cluster in Docker."),(0,s.yg)("ol",null,(0,s.yg)("li",{parentName:"ol"},(0,s.yg)("p",{parentName:"li"},"Pull the PostgreSQL 12 image from Docker."),(0,s.yg)("pre",{parentName:"li"},(0,s.yg)("code",{parentName:"pre",className:"language-bash"},"\n$ docker pull postgres:12\n\n"))),(0,s.yg)("li",{parentName:"ol"},(0,s.yg)("p",{parentName:"li"},"Start PostgreSQL."),(0,s.yg)("pre",{parentName:"li"},(0,s.yg)("code",{parentName:"pre",className:"language-bash"},"\n$ docker run -d -it --rm \\\n--name pulsar-postgres \\\n-p 5432:5432 \\\n-e POSTGRES_PASSWORD=password \\\n-e POSTGRES_USER=postgres \\\npostgres:12\n\n")),(0,s.yg)("h4",{parentName:"li",id:"tip"},"Tip"),(0,s.yg)("table",{parentName:"li"},(0,s.yg)("thead",{parentName:"table"},(0,s.yg)("tr",{parentName:"thead"},(0,s.yg)("th",{parentName:"tr",align:null},"Flag"),(0,s.yg)("th",{parentName:"tr",align:null},"Description"),(0,s.yg)("th",{parentName:"tr",align:null},"This example"))),(0,s.yg)("tbody",{parentName:"table"},(0,s.yg)("tr",{parentName:"tbody"},(0,s.yg)("td",{parentName:"tr",align:null},(0,s.yg)("inlineCode",{parentName:"td"},"-d")),(0,s.yg)("td",{parentName:"tr",align:null},"To start a container in detached mode."),(0,s.yg)("td",{parentName:"tr",align:null},"/")),(0,s.yg)("tr",{parentName:"tbody"},(0,s.yg)("td",{parentName:"tr",align:null},(0,s.yg)("inlineCode",{parentName:"td"},"-it")),(0,s.yg)("td",{parentName:"tr",align:null},"Keep STDIN open even if not attached and allocate a terminal."),(0,s.yg)("td",{parentName:"tr",align:null},"/")),(0,s.yg)("tr",{parentName:"tbody"},(0,s.yg)("td",{parentName:"tr",align:null},(0,s.yg)("inlineCode",{parentName:"td"},"--rm")),(0,s.yg)("td",{parentName:"tr",align:null},"Remove the container automatically when it exits."),(0,s.yg)("td",{parentName:"tr",align:null},"/")),(0,s.yg)("tr",{parentName:"tbody"},(0,s.yg)("td",{parentName:"tr",align:null},(0,s.yg)("inlineCode",{parentName:"td"},"-name")),(0,s.yg)("td",{parentName:"tr",align:null},"Assign a name to the container."),(0,s.yg)("td",{parentName:"tr",align:null},"This example specifies ",(0,s.yg)("em",{parentName:"td"},"pulsar-postgres")," for the container.")),(0,s.yg)("tr",{parentName:"tbody"},(0,s.yg)("td",{parentName:"tr",align:null},(0,s.yg)("inlineCode",{parentName:"td"},"-p")),(0,s.yg)("td",{parentName:"tr",align:null},"Publish the port of the container to the host."),(0,s.yg)("td",{parentName:"tr",align:null},"This example publishes the port ",(0,s.yg)("em",{parentName:"td"},"5432")," of the container to the host.")),(0,s.yg)("tr",{parentName:"tbody"},(0,s.yg)("td",{parentName:"tr",align:null},(0,s.yg)("inlineCode",{parentName:"td"},"-e")),(0,s.yg)("td",{parentName:"tr",align:null},"Set environment variables."),(0,s.yg)("td",{parentName:"tr",align:null},"This example sets the following variables:",(0,s.yg)("br",null),"- The password for the user is ",(0,s.yg)("em",{parentName:"td"},"password"),".",(0,s.yg)("br",null),"- The name for the user is ",(0,s.yg)("em",{parentName:"td"},"postgres"),".")))),(0,s.yg)("admonition",{parentName:"li",type:"tip"},(0,s.yg)("p",{parentName:"admonition"},"For more information about Docker commands, see ",(0,s.yg)("a",{parentName:"p",href:"https://docs.docker.com/engine/reference/commandline/run/"},"Docker CLI"),"."))),(0,s.yg)("li",{parentName:"ol"},(0,s.yg)("p",{parentName:"li"},"Check if PostgreSQL has been started successfully."),(0,s.yg)("pre",{parentName:"li"},(0,s.yg)("code",{parentName:"pre",className:"language-bash"},"\n$ docker logs -f pulsar-postgres\n\n")),(0,s.yg)("p",{parentName:"li"},"PostgreSQL has been started successfully if the following message appears."),(0,s.yg)("pre",{parentName:"li"},(0,s.yg)("code",{parentName:"pre",className:"language-text"},'\n2020-05-11 20:09:24.492 UTC [1] LOG:  starting PostgreSQL 12.2 (Debian 12.2-2.pgdg100+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 8.3.0-6) 8.3.0, 64-bit\n2020-05-11 20:09:24.492 UTC [1] LOG:  listening on IPv4 address "0.0.0.0", port 5432\n2020-05-11 20:09:24.492 UTC [1] LOG:  listening on IPv6 address "::", port 5432\n2020-05-11 20:09:24.499 UTC [1] LOG:  listening on Unix socket "/var/run/postgresql/.s.PGSQL.5432"\n2020-05-11 20:09:24.523 UTC [55] LOG:  database system was shut down at 2020-05-11 20:09:24 UTC\n2020-05-11 20:09:24.533 UTC [1] LOG:  database system is ready to accept connections\n\n'))),(0,s.yg)("li",{parentName:"ol"},(0,s.yg)("p",{parentName:"li"},"Access to PostgreSQL."),(0,s.yg)("pre",{parentName:"li"},(0,s.yg)("code",{parentName:"pre",className:"language-bash"},"\n$ docker exec -it pulsar-postgres /bin/bash\n\n"))),(0,s.yg)("li",{parentName:"ol"},(0,s.yg)("p",{parentName:"li"},"Create a PostgreSQL table ",(0,s.yg)("em",{parentName:"p"},"pulsar_postgres_jdbc_sink"),"."),(0,s.yg)("pre",{parentName:"li"},(0,s.yg)("code",{parentName:"pre",className:"language-bash"},"\n$ psql -U postgres postgres\n\npostgres=# create table if not exists pulsar_postgres_jdbc_sink\n(\nid serial PRIMARY KEY,\nname VARCHAR(255) NOT NULL\n);\n\n")))),(0,s.yg)("h3",{id:"configure-a-jdbc-sink"},"Configure a JDBC sink"),(0,s.yg)("p",null,"Now we have a PostgreSQL running locally."),(0,s.yg)("p",null,"In this section, you need to configure a JDBC sink connector."),(0,s.yg)("ol",null,(0,s.yg)("li",{parentName:"ol"},(0,s.yg)("p",{parentName:"li"},"Add a configuration file."),(0,s.yg)("p",{parentName:"li"},"To run a JDBC sink connector, you need to prepare a YAML configuration file including the information that Pulsar connector runtime needs to know."),(0,s.yg)("p",{parentName:"li"},"For example, how Pulsar connector can find the PostgreSQL cluster, what is the JDBC URL and the table that Pulsar connector uses for writing messages to."),(0,s.yg)("p",{parentName:"li"},"Create a ",(0,s.yg)("em",{parentName:"p"},"pulsar-postgres-jdbc-sink.yaml")," file, copy the following contents to this file, and place the file in the ",(0,s.yg)("inlineCode",{parentName:"p"},"pulsar/connectors")," folder."),(0,s.yg)("pre",{parentName:"li"},(0,s.yg)("code",{parentName:"pre",className:"language-yaml"},'\nconfigs:\n  userName: "postgres"\n  password: "password"\n  jdbcUrl: "jdbc:postgresql://localhost:5432/pulsar_postgres_jdbc_sink"\n  tableName: "pulsar_postgres_jdbc_sink"\n\n'))),(0,s.yg)("li",{parentName:"ol"},(0,s.yg)("p",{parentName:"li"},"Create a schema."),(0,s.yg)("p",{parentName:"li"},"Create a ",(0,s.yg)("em",{parentName:"p"},"avro-schema")," file, copy the following contents to this file, and place the file in the ",(0,s.yg)("inlineCode",{parentName:"p"},"pulsar/connectors")," folder."),(0,s.yg)("pre",{parentName:"li"},(0,s.yg)("code",{parentName:"pre",className:"language-json"},'\n{\n  "type": "AVRO",\n  "schema": "{\\"type\\":\\"record\\",\\"name\\":\\"Test\\",\\"fields\\":[{\\"name\\":\\"id\\",\\"type\\":[\\"null\\",\\"int\\"]},{\\"name\\":\\"name\\",\\"type\\":[\\"null\\",\\"string\\"]}]}",\n  "properties": {}\n}\n\n')),(0,s.yg)("admonition",{parentName:"li",type:"tip"},(0,s.yg)("p",{parentName:"admonition"},"For more information about AVRO, see ",(0,s.yg)("a",{parentName:"p",href:"https://avro.apache.org/docs/1.9.1/"},"Apache Avro"),"."))),(0,s.yg)("li",{parentName:"ol"},(0,s.yg)("p",{parentName:"li"},"Upload a schema to a topic."),(0,s.yg)("p",{parentName:"li"},"This example uploads the ",(0,s.yg)("em",{parentName:"p"},"avro-schema")," schema to the ",(0,s.yg)("em",{parentName:"p"},"pulsar-postgres-jdbc-sink-topic")," topic."),(0,s.yg)("pre",{parentName:"li"},(0,s.yg)("code",{parentName:"pre",className:"language-bash"},"\n$ bin/pulsar-admin schemas upload pulsar-postgres-jdbc-sink-topic -f ./connectors/avro-schema\n\n"))),(0,s.yg)("li",{parentName:"ol"},(0,s.yg)("p",{parentName:"li"},"Check if the schema has been uploaded successfully."),(0,s.yg)("pre",{parentName:"li"},(0,s.yg)("code",{parentName:"pre",className:"language-bash"},"\n$ bin/pulsar-admin schemas get pulsar-postgres-jdbc-sink-topic\n\n")),(0,s.yg)("p",{parentName:"li"},"The schema has been uploaded successfully if the following message appears."),(0,s.yg)("pre",{parentName:"li"},(0,s.yg)("code",{parentName:"pre",className:"language-json"},'\n{"name":"pulsar-postgres-jdbc-sink-topic","schema":"{\\"type\\":\\"record\\",\\"name\\":\\"Test\\",\\"fields\\":[{\\"name\\":\\"id\\",\\"type\\":[\\"null\\",\\"int\\"]},{\\"name\\":\\"name\\",\\"type\\":[\\"null\\",\\"string\\"]}]}","type":"AVRO","properties":{}}\n\n')))),(0,s.yg)("h3",{id:"create-a-jdbc-sink"},"Create a JDBC sink"),(0,s.yg)("p",null,"You can use the ",(0,s.yg)("a",{parentName:"p",href:"/docs/2.6.2/io-cli"},"Connector Admin CLI"),"\nto create a sink connector and perform other operations on it."),(0,s.yg)("p",null,"This example creates a sink connector and specifies the desired information."),(0,s.yg)("pre",null,(0,s.yg)("code",{parentName:"pre",className:"language-bash"},"\n$ bin/pulsar-admin sinks create \\\n--archive ./connectors/pulsar-io-jdbc-postgres-2.6.2.nar \\\n--inputs pulsar-postgres-jdbc-sink-topic \\\n--name pulsar-postgres-jdbc-sink \\\n--sink-config-file ./connectors/pulsar-postgres-jdbc-sink.yaml \\\n--parallelism 1\n\n")),(0,s.yg)("p",null,"Once the command is executed, Pulsar creates a sink connector ",(0,s.yg)("em",{parentName:"p"},"pulsar-postgres-jdbc-sink"),"."),(0,s.yg)("p",null,"This sink connector runs as a Pulsar Function and writes the messages produced in the topic ",(0,s.yg)("em",{parentName:"p"},"pulsar-postgres-jdbc-sink-topic")," to the PostgreSQL table ",(0,s.yg)("em",{parentName:"p"},"pulsar_postgres_jdbc_sink"),"."),(0,s.yg)("h4",{id:"tip-1"},"Tip"),(0,s.yg)("table",null,(0,s.yg)("thead",{parentName:"table"},(0,s.yg)("tr",{parentName:"thead"},(0,s.yg)("th",{parentName:"tr",align:null},"Flag"),(0,s.yg)("th",{parentName:"tr",align:null},"Description"),(0,s.yg)("th",{parentName:"tr",align:null},"This example"))),(0,s.yg)("tbody",{parentName:"table"},(0,s.yg)("tr",{parentName:"tbody"},(0,s.yg)("td",{parentName:"tr",align:null},(0,s.yg)("inlineCode",{parentName:"td"},"--archive")),(0,s.yg)("td",{parentName:"tr",align:null},"The path to the archive file for the sink."),(0,s.yg)("td",{parentName:"tr",align:null},(0,s.yg)("em",{parentName:"td"},"pulsar-io-jdbc-postgres-2.6.2.nar"))),(0,s.yg)("tr",{parentName:"tbody"},(0,s.yg)("td",{parentName:"tr",align:null},(0,s.yg)("inlineCode",{parentName:"td"},"--inputs")),(0,s.yg)("td",{parentName:"tr",align:null},"The input topic(s) of the sink. ",(0,s.yg)("br",null),(0,s.yg)("br",null)," Multiple topics can be specified as a comma-separated list."),(0,s.yg)("td",{parentName:"tr",align:null})),(0,s.yg)("tr",{parentName:"tbody"},(0,s.yg)("td",{parentName:"tr",align:null},(0,s.yg)("inlineCode",{parentName:"td"},"--name")),(0,s.yg)("td",{parentName:"tr",align:null},"The name of the sink."),(0,s.yg)("td",{parentName:"tr",align:null},(0,s.yg)("em",{parentName:"td"},"pulsar-postgres-jdbc-sink"))),(0,s.yg)("tr",{parentName:"tbody"},(0,s.yg)("td",{parentName:"tr",align:null},(0,s.yg)("inlineCode",{parentName:"td"},"--sink-config-file")),(0,s.yg)("td",{parentName:"tr",align:null},"The path to a YAML config file specifying the configuration of the sink."),(0,s.yg)("td",{parentName:"tr",align:null},(0,s.yg)("em",{parentName:"td"},"pulsar-postgres-jdbc-sink.yaml"))),(0,s.yg)("tr",{parentName:"tbody"},(0,s.yg)("td",{parentName:"tr",align:null},(0,s.yg)("inlineCode",{parentName:"td"},"--parallelism")),(0,s.yg)("td",{parentName:"tr",align:null},"The parallelism factor of the sink. ",(0,s.yg)("br",null),(0,s.yg)("br",null)," For example, the number of sink instances to run."),(0,s.yg)("td",{parentName:"tr",align:null},(0,s.yg)("em",{parentName:"td"},"1"))))),(0,s.yg)("admonition",{type:"tip"},(0,s.yg)("p",{parentName:"admonition"},"For more information about ",(0,s.yg)("inlineCode",{parentName:"p"},"pulsar-admin sinks create options"),", see ",(0,s.yg)("a",{parentName:"p",href:"/docs/2.6.2/io-cli#sinks"},"here"),".")),(0,s.yg)("p",null,"The sink has been created successfully if the following message appears."),(0,s.yg)("pre",null,(0,s.yg)("code",{parentName:"pre",className:"language-bash"},'\n"Created successfully"\n\n')),(0,s.yg)("h3",{id:"inspect-a-jdbc-sink"},"Inspect a JDBC sink"),(0,s.yg)("p",null,"You can use the ",(0,s.yg)("a",{parentName:"p",href:"/docs/2.6.2/io-cli"},"Connector Admin CLI"),"\nto monitor a connector and perform other operations on it."),(0,s.yg)("ul",null,(0,s.yg)("li",{parentName:"ul"},(0,s.yg)("p",{parentName:"li"},"List all running JDBC sink(s)."),(0,s.yg)("pre",{parentName:"li"},(0,s.yg)("code",{parentName:"pre",className:"language-bash"},"\n$ bin/pulsar-admin sinks list \\\n--tenant public \\\n--namespace default\n\n")),(0,s.yg)("admonition",{parentName:"li",type:"tip"},(0,s.yg)("p",{parentName:"admonition"},"For more information about ",(0,s.yg)("inlineCode",{parentName:"p"},"pulsar-admin sinks list options"),", see ",(0,s.yg)("a",{parentName:"p",href:"/docs/2.6.2/io-cli/#list-1"},"here"),".")),(0,s.yg)("p",{parentName:"li"},"The result shows that only the ",(0,s.yg)("em",{parentName:"p"},"postgres-jdbc-sink")," sink is running."),(0,s.yg)("pre",{parentName:"li"},(0,s.yg)("code",{parentName:"pre",className:"language-json"},'\n[\n"pulsar-postgres-jdbc-sink"\n]\n\n'))),(0,s.yg)("li",{parentName:"ul"},(0,s.yg)("p",{parentName:"li"},"Get the information of a JDBC sink."),(0,s.yg)("pre",{parentName:"li"},(0,s.yg)("code",{parentName:"pre",className:"language-bash"},"\n$ bin/pulsar-admin sinks get \\\n--tenant public \\\n--namespace default \\\n--name pulsar-postgres-jdbc-sink\n\n")),(0,s.yg)("admonition",{parentName:"li",type:"tip"},(0,s.yg)("p",{parentName:"admonition"},"For more information about ",(0,s.yg)("inlineCode",{parentName:"p"},"pulsar-admin sinks get options"),", see ",(0,s.yg)("a",{parentName:"p",href:"/docs/2.6.2/io-cli/#get-1"},"here"),".")),(0,s.yg)("p",{parentName:"li"},"The result shows the information of the sink connector, including tenant, namespace, topic and so on."),(0,s.yg)("pre",{parentName:"li"},(0,s.yg)("code",{parentName:"pre",className:"language-json"},'\n{\n"tenant": "public",\n"namespace": "default",\n"name": "pulsar-postgres-jdbc-sink",\n"className": "org.apache.pulsar.io.jdbc.PostgresJdbcAutoSchemaSink",\n"inputSpecs": {\n  "pulsar-postgres-jdbc-sink-topic": {\n    "isRegexPattern": false\n  }\n},\n"configs": {\n  "password": "password",\n  "jdbcUrl": "jdbc:postgresql://localhost:5432/pulsar_postgres_jdbc_sink",\n  "userName": "postgres",\n  "tableName": "pulsar_postgres_jdbc_sink"\n},\n"parallelism": 1,\n"processingGuarantees": "ATLEAST_ONCE",\n"retainOrdering": false,\n"autoAck": true\n}\n\n'))),(0,s.yg)("li",{parentName:"ul"},(0,s.yg)("p",{parentName:"li"},"Get the status of a JDBC sink"),(0,s.yg)("pre",{parentName:"li"},(0,s.yg)("code",{parentName:"pre",className:"language-bash"},"\n$ bin/pulsar-admin sinks status \\\n--tenant public \\\n--namespace default \\\n--name pulsar-postgres-jdbc-sink\n\n")),(0,s.yg)("admonition",{parentName:"li",type:"tip"},(0,s.yg)("p",{parentName:"admonition"},"For more information about ",(0,s.yg)("inlineCode",{parentName:"p"},"pulsar-admin sinks status options"),", see ",(0,s.yg)("a",{parentName:"p",href:"/docs/2.6.2/io-cli/#status-1"},"here"),".")),(0,s.yg)("p",{parentName:"li"},"The result shows the current status of sink connector, including the number of instance, running status, worker ID and so on."),(0,s.yg)("pre",{parentName:"li"},(0,s.yg)("code",{parentName:"pre",className:"language-json"},'\n{\n"numInstances" : 1,\n"numRunning" : 1,\n"instances" : [ {\n  "instanceId" : 0,\n  "status" : {\n    "running" : true,\n    "error" : "",\n    "numRestarts" : 0,\n    "numReadFromPulsar" : 0,\n    "numSystemExceptions" : 0,\n    "latestSystemExceptions" : [ ],\n    "numSinkExceptions" : 0,\n    "latestSinkExceptions" : [ ],\n    "numWrittenToSink" : 0,\n    "lastReceivedTime" : 0,\n    "workerId" : "c-standalone-fw-192.168.2.52-8080"\n  }\n} ]\n}\n\n')))),(0,s.yg)("h3",{id:"stop-a-jdbc-sink"},"Stop a JDBC sink"),(0,s.yg)("p",null,"You can use the ",(0,s.yg)("a",{parentName:"p",href:"/docs/2.6.2/io-cli"},"Connector Admin CLI"),"\nto stop a connector and perform other operations on it."),(0,s.yg)("pre",null,(0,s.yg)("code",{parentName:"pre",className:"language-bash"},"\n$ bin/pulsar-admin sinks stop \\\n--tenant public \\\n--namespace default \\\n--name pulsar-postgres-jdbc-sink\n\n")),(0,s.yg)("admonition",{type:"tip"},(0,s.yg)("p",{parentName:"admonition"},"For more information about ",(0,s.yg)("inlineCode",{parentName:"p"},"pulsar-admin sinks stop options"),", see ",(0,s.yg)("a",{parentName:"p",href:"/docs/2.6.2/io-cli/#stop-1"},"here"),".")),(0,s.yg)("p",null,"The sink instance has been stopped successfully if the following message disappears."),(0,s.yg)("pre",null,(0,s.yg)("code",{parentName:"pre",className:"language-bash"},'\n"Stopped successfully"\n\n')),(0,s.yg)("h3",{id:"restart-a-jdbc-sink"},"Restart a JDBC sink"),(0,s.yg)("p",null,"You can use the ",(0,s.yg)("a",{parentName:"p",href:"/docs/2.6.2/io-cli"},"Connector Admin CLI"),"\nto restart a connector and perform other operations on it."),(0,s.yg)("pre",null,(0,s.yg)("code",{parentName:"pre",className:"language-bash"},"\n$ bin/pulsar-admin sinks restart \\\n--tenant public \\\n--namespace default \\\n--name pulsar-postgres-jdbc-sink\n\n")),(0,s.yg)("admonition",{type:"tip"},(0,s.yg)("p",{parentName:"admonition"},"For more information about ",(0,s.yg)("inlineCode",{parentName:"p"},"pulsar-admin sinks restart options"),", see ",(0,s.yg)("a",{parentName:"p",href:"/docs/2.6.2/io-cli/#restart-1"},"here"),".")),(0,s.yg)("p",null,"The sink instance has been started successfully if the following message disappears."),(0,s.yg)("pre",null,(0,s.yg)("code",{parentName:"pre",className:"language-bash"},'\n"Started successfully"\n\n')),(0,s.yg)("admonition",{type:"tip"},(0,s.yg)("ul",{parentName:"admonition"},(0,s.yg)("li",{parentName:"ul"},"Optionally, you can run a standalone sink connector using ",(0,s.yg)("inlineCode",{parentName:"li"},"pulsar-admin sinks localrun options"),".\nNote that ",(0,s.yg)("inlineCode",{parentName:"li"},"pulsar-admin sinks localrun options")," ",(0,s.yg)("strong",{parentName:"li"},"runs a sink connector locally"),", while ",(0,s.yg)("inlineCode",{parentName:"li"},"pulsar-admin sinks start options")," ",(0,s.yg)("strong",{parentName:"li"},"starts a sink connector in a cluster"),"."),(0,s.yg)("li",{parentName:"ul"},"For more information about ",(0,s.yg)("inlineCode",{parentName:"li"},"pulsar-admin sinks localrun options"),", see ",(0,s.yg)("a",{parentName:"li",href:"/docs/2.6.2/io-cli#localrun-1"},"here"),"."))),(0,s.yg)("h3",{id:"update-a-jdbc-sink"},"Update a JDBC sink"),(0,s.yg)("p",null,"You can use the ",(0,s.yg)("a",{parentName:"p",href:"/docs/2.6.2/io-cli"},"Connector Admin CLI"),"\nto update a connector and perform other operations on it."),(0,s.yg)("p",null,"This example updates the parallelism of the ",(0,s.yg)("em",{parentName:"p"},"pulsar-postgres-jdbc-sink")," sink connector to 2."),(0,s.yg)("pre",null,(0,s.yg)("code",{parentName:"pre",className:"language-bash"},"\n$ bin/pulsar-admin sinks update \\\n--name pulsar-postgres-jdbc-sink \\\n--parallelism 2\n\n")),(0,s.yg)("admonition",{type:"tip"},(0,s.yg)("p",{parentName:"admonition"},"For more information about ",(0,s.yg)("inlineCode",{parentName:"p"},"pulsar-admin sinks update options"),", see ",(0,s.yg)("a",{parentName:"p",href:"/docs/2.6.2/io-cli/#update-1"},"here"),".")),(0,s.yg)("p",null,"The sink connector has been updated successfully if the following message disappears."),(0,s.yg)("pre",null,(0,s.yg)("code",{parentName:"pre",className:"language-bash"},'\n"Updated successfully"\n\n')),(0,s.yg)("p",null,"This example double-checks the information."),(0,s.yg)("pre",null,(0,s.yg)("code",{parentName:"pre",className:"language-bash"},"\n$ bin/pulsar-admin sinks get \\\n--tenant public \\\n--namespace default \\\n--name pulsar-postgres-jdbc-sink\n\n")),(0,s.yg)("p",null,"The result shows that the parallelism is 2."),(0,s.yg)("pre",null,(0,s.yg)("code",{parentName:"pre",className:"language-json"},'\n{\n  "tenant": "public",\n  "namespace": "default",\n  "name": "pulsar-postgres-jdbc-sink",\n  "className": "org.apache.pulsar.io.jdbc.PostgresJdbcAutoSchemaSink",\n  "inputSpecs": {\n    "pulsar-postgres-jdbc-sink-topic": {\n      "isRegexPattern": false\n    }\n  },\n  "configs": {\n    "password": "password",\n    "jdbcUrl": "jdbc:postgresql://localhost:5432/pulsar_postgres_jdbc_sink",\n    "userName": "postgres",\n    "tableName": "pulsar_postgres_jdbc_sink"\n  },\n  "parallelism": 2,\n  "processingGuarantees": "ATLEAST_ONCE",\n  "retainOrdering": false,\n  "autoAck": true\n}\n\n')),(0,s.yg)("h3",{id:"delete-a-jdbc-sink"},"Delete a JDBC sink"),(0,s.yg)("p",null,"You can use the ",(0,s.yg)("a",{parentName:"p",href:"/docs/2.6.2/io-cli"},"Connector Admin CLI"),"\nto delete a connector and perform other operations on it."),(0,s.yg)("p",null,"This example deletes the ",(0,s.yg)("em",{parentName:"p"},"pulsar-postgres-jdbc-sink")," sink connector."),(0,s.yg)("pre",null,(0,s.yg)("code",{parentName:"pre",className:"language-bash"},"\n$ bin/pulsar-admin sinks delete \\\n--tenant public \\\n--namespace default \\\n--name pulsar-postgres-jdbc-sink\n\n")),(0,s.yg)("admonition",{type:"tip"},(0,s.yg)("p",{parentName:"admonition"},"For more information about ",(0,s.yg)("inlineCode",{parentName:"p"},"pulsar-admin sinks delete options"),", see ",(0,s.yg)("a",{parentName:"p",href:"/docs/2.6.2/io-cli/#delete-1"},"here"),".")),(0,s.yg)("p",null,"The sink connector has been deleted successfully if the following message appears."),(0,s.yg)("pre",null,(0,s.yg)("code",{parentName:"pre",className:"language-text"},'\n"Deleted successfully"\n\n')),(0,s.yg)("p",null,"This example double-checks the status of the sink connector."),(0,s.yg)("pre",null,(0,s.yg)("code",{parentName:"pre",className:"language-bash"},"\n$ bin/pulsar-admin sinks get \\\n--tenant public \\\n--namespace default \\\n--name pulsar-postgres-jdbc-sink\n\n")),(0,s.yg)("p",null,"The result shows that the sink connector does not exist."),(0,s.yg)("pre",null,(0,s.yg)("code",{parentName:"pre",className:"language-text"},"\nHTTP 404 Not Found\n\nReason: Sink pulsar-postgres-jdbc-sink doesn't exist\n\n")))}m.isMDXComponent=!0}}]);